# Homepage Dashboard Values - Enhanced Homelab Command Center
# Feature-rich dashboard with comprehensive monitoring and sexy visuals

image:
  repository: ghcr.io/gethomepage/homepage
  tag: latest

# Environment configuration using standard env array format
env:
  - name: HOMEPAGE_ALLOWED_HOSTS
    value: "home.techdufus.com"
  - name: LOG_LEVEL
    value: "info"
  # Map secrets to HOMEPAGE_VAR format for template substitution
  - name: HOMEPAGE_VAR_PIHOLE_KEY
    valueFrom:
      secretKeyRef:
        name: homepage-secrets
        key: PIHOLE_API_KEY
        optional: true
  - name: HOMEPAGE_VAR_PROXMOX_USERNAME
    valueFrom:
      secretKeyRef:
        name: homepage-secrets
        key: PROXMOX_USERNAME
        optional: true
  - name: HOMEPAGE_VAR_PROXMOX_PASSWORD
    valueFrom:
      secretKeyRef:
        name: homepage-secrets
        key: PROXMOX_PASSWORD
        optional: true
  - name: HOMEPAGE_VAR_ARGOCD_TOKEN
    valueFrom:
      secretKeyRef:
        name: homepage-secrets
        key: ARGOCD_TOKEN
        optional: true
  - name: HOMEPAGE_VAR_IMMICH_KEY
    valueFrom:
      secretKeyRef:
        name: homepage-secrets
        key: IMMICH_API_KEY
        optional: true
  - name: HOMEPAGE_VAR_WEATHER_KEY
    valueFrom:
      secretKeyRef:
        name: homepage-secrets
        key: OPENWEATHER_API_KEY
        optional: true
  - name: HOMEPAGE_VAR_CF_ACCOUNT
    valueFrom:
      secretKeyRef:
        name: homepage-secrets
        key: CLOUDFLARE_ACCOUNT_ID
        optional: true
  - name: HOMEPAGE_VAR_CF_TUNNEL
    valueFrom:
      secretKeyRef:
        name: homepage-secrets
        key: CLOUDFLARE_TUNNEL_ID
        optional: true
  - name: HOMEPAGE_VAR_CF_KEY
    valueFrom:
      secretKeyRef:
        name: homepage-secrets
        key: CLOUDFLARE_API_KEY
        optional: true

# Service configuration
service:
  main:
    ports:
      http:
        port: 3000

# Resources for homelab - increased for more widgets
resources:
  requests:
    cpu: 100m
    memory: 256Mi
  limits:
    cpu: 500m
    memory: 512Mi

# Enable Kubernetes integration with extended permissions
enableRbac: true
serviceAccount:
  create: true
  name: homepage

# Homepage configuration via ConfigMap
config:
  # Kubernetes integration settings
  kubernetes:
    mode: cluster
  
  # Settings configuration - Enhanced visuals
  settings:
    title: TechDufus Homelab
    favicon: https://raw.githubusercontent.com/walkxcode/dashboard-icons/main/png/homepage.png
    background: 
      image: https://images.unsplash.com/photo-1451187580459-43490279c0fa?q=80&w=3072
      blur: sm
      saturate: 100
      brightness: 60
      opacity: 100
    theme: dark
    color: cyan
    target: _blank
    language: en
    hideVersion: false
    statusStyle: "dot"
    layout:
      - Network & Security:
          style: row
          columns: 4
      - Infrastructure:
          style: row
          columns: 4
      - Applications:
          style: row
          columns: 4
      - Monitoring:
          style: row
          columns: 4
    cardBlur: md
    disableCollapse: false
    hideErrors: false
    showStats: true
  
  # Enhanced services configuration with widgets
  services:
    - Network & Security:
        - Pi-hole:
            icon: pi-hole.png
            href: http://10.0.0.99/admin
            description: Network-wide Ad Blocking
            siteMonitor: http://10.0.0.99
            widget:
              type: pihole
              url: http://10.0.0.99/admin
              key: "{{HOMEPAGE_VAR_PIHOLE_KEY}}"
              fields: ["queries", "blocked", "blocked_percent", "gravity"]
        
        - Cloudflare:
            icon: cloudflare.png
            href: https://dash.cloudflare.com
            description: DNS & Tunnel Management
        
        - Traefik:
            icon: traefik.png
            href: http://traefik.traefik.svc.cluster.local:9000
            description: Gateway Controller
            ping: traefik.traefik.svc.cluster.local
            widget:
              type: traefik
              url: http://traefik.traefik.svc.cluster.local:9000
    
    - Infrastructure:
        - Proxmox:
            icon: proxmox.png
            href: https://10.0.20.3:8006
            description: Virtualization Platform
            siteMonitor: https://10.0.20.3:8006
            widget:
              type: proxmox
              url: https://10.0.20.3:8006
              username: "{{HOMEPAGE_VAR_PROXMOX_USERNAME}}"
              password: "{{HOMEPAGE_VAR_PROXMOX_PASSWORD}}"
              node: proxmox
              fields: ["vms", "lxc", "resources.cpu", "resources.mem"]
        
        - Kubernetes:
            icon: kubernetes.png
            description: Container Orchestration
            namespace: kube-system
            app: metrics-server
        
        - ArgoCD:
            icon: argocd.png
            href: https://argocd.techdufus.com
            description: GitOps Deployment
            ping: argocd-server.argocd.svc.cluster.local
            widget:
              type: argocd
              url: http://argocd-server.argocd.svc.cluster.local
              token: "{{HOMEPAGE_VAR_ARGOCD_TOKEN}}"
    
    - Applications:
        - Immich:
            icon: immich.png
            href: https://photos.techdufus.com
            description: Photo Management (v1.119.0)
            ping: immich-server.immich.svc.cluster.local
            widget:
              type: immich
              url: http://immich-server.immich.svc.cluster.local:2283
              key: "{{HOMEPAGE_VAR_IMMICH_KEY}}"
        
        - Homepage:
            icon: homepage.png
            href: https://home.techdufus.com
            description: This Dashboard
        
        - CloudNativePG:
            icon: postgres.png
            description: PostgreSQL Operator
            namespace: immich
            app: postgres-cluster
    
    - Monitoring:
        
        - MetalLB:
            icon: metallb.png
            description: Load Balancer
            namespace: metallb-system
            app: metallb
        
        - Local Path:
            icon: kubernetes.png
            description: Storage Provider
            namespace: local-path-storage
            app: local-path-provisioner
  
  # Bookmarks with icons
  bookmarks:
    - Developer:
        - GitHub Repo:
            - icon: github.png
              href: https://github.com/TechDufus/home.io
              abbr: GH
        - Homepage Docs:
            - icon: homepage.png
              href: https://gethomepage.dev
              abbr: HP
    
    - Infrastructure:
        - Proxmox Forum:
            - icon: proxmox.png
              href: https://forum.proxmox.com
              abbr: PF
        - Pi-hole Docs:
            - icon: pi-hole.png
              href: https://docs.pi-hole.net
              abbr: PH
    
    - Cloud Services:
        - Cloudflare:
            - icon: cloudflare.png
              href: https://dash.cloudflare.com
              abbr: CF
        - 1Password:
            - icon: onepassword.png
              href: https://my.1password.com
              abbr: 1P
  
  # Enhanced widgets configuration
  widgets:
    # Greeting with custom text
    - greeting:
        text_size: 3xl
        text: "Welcome to TechDufus Homelab! ðŸš€"
    
    # Resources monitor (if you mount host paths)
    - resources:
        backend: kubernetes
        cpu: true
        memory: true
        expanded: true
        label: "Cluster"
    
    # Kubernetes cluster overview
    - kubernetes:
        show: true
        cpu: true
        memory: true
        showLabel: true
        label: "K8s Cluster"
        nodes: true
    
    # Date and time
    - datetime:
        text_size: xl
        locale: en
        format:
          dateStyle: long
          timeStyle: short
          hour12: true
    
    # Weather widget (configure your location)
    - openweathermap:
        label: "Weather"
        latitude: 40.7128  # Replace with your latitude
        longitude: -74.0060  # Replace with your longitude
        units: imperial
        apiKey: "{{HOMEPAGE_VAR_WEATHER_KEY}}"
        cache: 5
    
    # Search bar
    - search:
        provider: google
        focus: false
        showSearchSuggestions: true
        target: _blank
    

# Custom CSS for extra styling (optional)
customCSS: |
  /* Add custom styles here if needed */
  .service-card:hover {
    transform: scale(1.02);
    transition: all 0.2s ease;
  }

# No persistence needed - everything is in ConfigMaps
persistence:
  config:
    enabled: false